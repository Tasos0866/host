import{b as E}from"./chunk-CDRVJPGK.js";import{c as B,d as H,e as F,f as A,g as N,h as O,i as D,j as L,k,l as z,m as R,o as j,p as q,q as G}from"./chunk-7HRNV44S.js";import"./chunk-CJA2TO4M.js";import{Ab as u,Bb as g,Cb as f,Db as M,Eb as x,Fa as i,Fb as C,Jb as m,Ka as W,Kb as h,Qa as P,_a as d,cb as b,db as S,ea as V,eb as T,fa as v,fb as l,gb as n,hb as w,lb as y,nb as c,ob as _,qc as I,zb as s}from"./chunk-W6CIVE6P.js";function K(p,a){if(p&1){let t=y();l(0,"mat-chip-option",15),c("selectionChange",function(){let o=V(t).$implicit,r=_();return v(r.onMaterialChange(o))}),s(1),m(2,"translate"),n()}if(p&2){let t=a.$implicit,e=_();d("selected",e.selectedMaterial===t)("selectable",e.selectedMaterial!==t),i(),g(" ",h(2,3,t)," ")}}var J=class p{constructor(a){this.sunAwningsPriceService=a;a.hasData()?this.initializeView():a.loadPricesFromSheet().subscribe(()=>{this.initializeView()})}materials=["PVC","Fabric"];minWidthValue=100;maxWidthValue=500;minHeightValue=60;maxHeightValue=150;width=this.minWidthValue;height=this.minHeightValue;totalPrice=null;totalPriceWithTax=null;tax=null;selectedMaterial="";initializeView(){this.selectedMaterial=this.materials[0],this.calculateTotalPrice()}clampValue(a,t,e){return Math.min(Math.max(a,t),e)}calculateTotalPrice(){if(this.valuesOutOfRange()){this.totalPrice=null,this.totalPriceWithTax=null,this.tax=null;return}let a=this.sunAwningsPriceService.getExtraInfo("VAT")/100;this.totalPrice=this.sunAwningsPriceService.getPrice("Windows "+this.selectedMaterial,this.height,this.width)||0,this.totalPrice=this.totalPrice*2,this.tax=Math.floor(this.totalPrice*a),this.totalPriceWithTax=Math.floor(this.totalPrice+this.tax)}valuesOutOfRange(){return this.width<this.minWidthValue||this.width>this.maxWidthValue||this.height<this.minHeightValue||this.height>this.maxHeightValue}onBlur(a,t){let e=a.target;if(!e)return;let o=Number(e.value);t==="width"?(this.width=this.clampValue(o,this.minWidthValue,this.maxWidthValue),e.value=String(this.width)):t==="height"&&(this.height=this.clampValue(o,this.minHeightValue,this.maxHeightValue),e.value=String(this.height)),this.calculateTotalPrice()}onMaterialChange(a){this.selectedMaterial=a,this.calculateTotalPrice()}static \u0275fac=function(t){return new(t||p)(W(E))};static \u0275cmp=P({type:p,selectors:[["app-windows"]],decls:36,vars:32,consts:[[1,"windows","product-container"],[1,"awning-title"],[1,"desktop-layout"],[1,"svg-width"],["src","assets/img/sun-awnings/windows.webp","alt","Windows awning illustration",1,"awning-image"],[1,"form-fields"],[1,"awning-title-desktop"],[1,"dimensions-title"],[1,"dimensions-fields"],["appearance","outline",1,"width-field"],["matInput","","type","number",3,"ngModelChange","blur","ngModel","min","max"],["appearance","outline"],["aria-label","Material",1,"field",3,"hideSingleSelectionIndicator"],[3,"selected","selectable"],[3,"totalPriceWithTax","totalPrice","tax"],[3,"selectionChange","selected","selectable"]],template:function(t,e){t&1&&(l(0,"div",0)(1,"h1",1),s(2),m(3,"translate"),n(),l(4,"div",2)(5,"div",3),w(6,"img",4),n(),l(7,"div",5)(8,"h1",6),s(9),m(10,"translate"),n(),l(11,"h4",7),s(12),m(13,"translate"),n(),l(14,"div",8)(15,"mat-form-field",9)(16,"mat-label"),s(17),m(18,"translate"),n(),l(19,"input",10),C("ngModelChange",function(r){return x(e.width,r)||(e.width=r),r}),c("ngModelChange",function(){return e.calculateTotalPrice()})("blur",function(r){return e.onBlur(r,"width")}),n(),l(20,"mat-hint"),s(21),n()(),l(22,"mat-form-field",11)(23,"mat-label"),s(24),m(25,"translate"),n(),l(26,"input",10),C("ngModelChange",function(r){return x(e.height,r)||(e.height=r),r}),c("ngModelChange",function(){return e.calculateTotalPrice()})("blur",function(r){return e.onBlur(r,"height")}),n(),l(27,"mat-hint"),s(28),n()()(),l(29,"h4"),s(30),m(31,"translate"),n(),l(32,"mat-chip-listbox",12),S(33,K,3,5,"mat-chip-option",13,b),n(),w(35,"app-total-price-card",14),n()()()),t&2&&(i(2),u(h(3,20,"windows_title")),i(7),u(h(10,22,"windows_title")),i(3),u(h(13,24,"dimensions")),i(5),g("",h(18,26,"width")," (cm)"),i(2),M("ngModel",e.width),d("min",e.minWidthValue)("max",e.maxWidthValue),i(2),f("Min: ",e.minWidthValue," cm, Max: ",e.maxWidthValue," cm"),i(3),g("",h(25,28,"height")," (cm)"),i(2),M("ngModel",e.height),d("min",e.minHeightValue)("max",e.maxHeightValue),i(2),f("Min: ",e.minHeightValue," cm, Max: ",e.maxHeightValue," cm"),i(2),u(h(31,30,"material")),i(2),d("hideSingleSelectionIndicator",!0),i(),T(e.materials),i(2),d("totalPriceWithTax",e.totalPriceWithTax)("totalPrice",e.totalPrice)("tax",e.tax))},dependencies:[z,L,R,D,B,A,H,O,N,F,k,j,I,G,q],styles:[".windows[_ngcontent-%COMP%]{min-width:320px;margin-top:24px;min-height:90%}"]})};export{J as WindowsComponent};
